# 이미지 대 컨테이너
## 이미지
- 컨테이너를 위한 템플릿/청사진
- 코드, 요구되는 도구/런타임을 포함한다.
- 레이어 기반, 읽기 전용. 애플리케이션 데이터는 저장되지 않는다.
- Docker Hub 등을 통해 이미 존재하는 이미지를 사용할 수 있다.
- Dockerfile(다른 이미지를 기반으로 할 수도 있다.)을 작성해 이미지를 생성할 수 있다.

## 컨테이너
- 동작하는 "소프트웨어의 단위"
- 하나의 이미지를 기반으로 여러 개의 컨테이너가 생성될 수 있다.
- 최상위 레이어, 읽기 및 쓰기 접근. 종료 시 데이터를 잃게 된다.

# 이미지, 이미지 레이어
- **모든 명령은 그 자체로 레이어**
- 레이어는 이미지 사이에서 공유된다: 그 덕에 도커 이미지와 컨테이너가 작다.

# 이미지와 컨테이너 관리하기
`--help`를 사용하면 모든 옵션을 확인할 수 있다.

## 이미지
- 태그될 수 있다(명명): *`-t`*, *`docker tag ...`*
- 리스트될 수 있다: *`docker images`*
- 분석될 수 있다: *`docker image inspect`*
- 삭제될 수 있다: *`docker rmi`*, *`docker prune`*

### 이미지 태그
```
name : tag
```
- name: 가능한 더 한정된, 이미지의 그룹을 정의한다. ex) `node`
- tag: 이미지 그룹에서 한정된 이미지를 정의한다. ex) `14`
- 결합하면: 고유한 식별자


## 컨테이너
- 명명될 수 있다: *`--name`*
- 세부적으로 구성될 수 있다: *`--help`* 참조
- 리스트될 수 있다: *`docker ps`*
- 삭제될 수 있다: *`docker rm`*

# 이미지, 컨테이너 공유하기
## Dockerfile 공유하기
- `docker build .`을 실행한다.
- **중요**: Dockerfile 명령어가 **주변 파일 또는 폴더를 필요로** 할 수 있다. (예: 소스코드)

## 빌트된 이미지 공유하기
- 이미지를 **다운로드**하고 그를 기반으로 **컨테이너를 실행**한다.
- **이미지 안에 모든 것이 포함**되어 있어 **빌드 과정이 필요없다**.

## Docker Hub 또는 사설 레지스트리로 공유하기
### Docker Hub
- 공식 도커 이미지 레지스트리
- 공개, 비공개, 그리고 "공식" 이미지

### Private Registry
- 사용하고 싶은 모든 공급자 / 레지스트리
- 개인 혹은 팀 이미지 한정

### 명령어
- 공유: `docker push IMAGE_NAME`
- 사용: `docker pull IMAGE_NAME`
- 사설 레지스트리의 경우: `IMAGE_NAME`은 `HOST:NAME`이어야 한다.

# 주요 명령어 모음
| 명령어 | 설명 |
| --- | --- |
| `docker create` | 새로운 컨테이너 생성 |
| `docker run` | 이미지를 기반으로 새로운 컨테이너를 생성하고 시작 |
| `docker stop` | 컨테이너 동작 정지 |
| `docker start` | 정지된 컨테이너 시작 |
| `docker rm` | 정지된 컨테이너 삭제 |
| `docker push / pull` | 원격 이미지 공유 / 다운로드 |
| `docker build` | Dockerfile을 기반으로 새로운 이미지 구축 |
| `docker rmi` | 로컬 이미지 삭제 |

# 모듈 요약
- 도커는 이미지와 컨테이너에 관한 것이다.
- 이미지는 컨테이너를 위한 템플릿 / 청사진이며, 하나의 이미지를 기반으로 여러 컨테이너를 생성할 수 있다.
- 이미지는 다운로드 받거나 (`docker pull`) Dockerfile과 `docker build`로 생성될 수 있다.
- 이미지는 빌드 속도를 최적화(캐싱)하고 재사용하기 위해 여러 개의 레이어(1 명령 = 1 레이어)를 가진다.
- 컨테이너는 `docker run IMAGE`로 생성되며, 여러 옵션 / 플래그로 구성될 수 있다.
- 컨테이너는 리스트(`docker ps`), 삭제(`docker rm`), 정지(`docker stop`), 시작(`docker start`)될 수 있다.
- 이미지 또한 리스트(`docker images`), 삭제(`docker rmi`, `docker image prune`), 공유(`docker push / pull`)될 수 있다.